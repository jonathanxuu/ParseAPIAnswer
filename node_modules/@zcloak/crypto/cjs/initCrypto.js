"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initCrypto = initCrypto;
var _secp256k = require("@noble/secp256k1");
var _util = require("@polkadot/util");
var _hmac = require("./hmac");
var _wasm = require("./wasm");
// Copyright 2021-2023 zcloak authors & contributors
// SPDX-License-Identifier: Apache-2.0

function initCrypto(onlyAsm) {
  // Set overrides on the secp256k1 utils
  //   - hmacShaSync - This needs to be set, unset by default
  _secp256k.utils.hmacSha256Sync = function (key) {
    for (var _len = arguments.length, messages = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      messages[_key - 1] = arguments[_key];
    }
    return (0, _hmac.hmacSha256AsU8a)(key, (0, _util.u8aConcat)(...messages));
  };
  return (0, _wasm.initWasm)(onlyAsm);
}